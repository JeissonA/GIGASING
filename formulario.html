<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PERMISO PARA TRABAJO EN ALTURA</title>
    <script src="jspdf.min.js"></script>
    <style>
        body {
    font-family: Arial, sans-serif;
}

h2 {
    text-align: center;
}
.DGP{
    text-align: center;
   
}
form {
    max-width: 400px;
    margin: 0 auto;
}

.campo {
    margin-bottom: 20px;
}

label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
}

input[type="text"],
input[type="date"],
input[type="time"] {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
}

button {
    display: block;
    width: 100%;
    padding: 10px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
}

button:hover {
    background-color: #45a049;
}


body {
    font-family: "Century Gothic", sans-serif;
    background-color: #f0f0f0;
    margin: 0;
    padding: 20px;
  }
  
  h2 {
    color: #333;
  }
  
  form {
    background-color: #fff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  
  .pregunta {
    margin-bottom: 20px;
  }
  
  label {
    display: block;
    margin-bottom: 10px;
  }
  
  input[type="radio"],
  input[type="text"] {
    margin-left: 10px;
  }
  
    </style>
</head>
<body>
    <h2>PERMISO PARA TRABAJO EN ALTURA</h2>
    <p class="DGP"><strong>DATOS GENERALES DEL PERMISO</strong></p>
    <form id="formularioPermiso">
        <div class="campo">
            <label for="proyecto">Proyecto o Área:</label>
            <input type="text" id="proyecto" name="proyecto" required>
        </div>

        <div class="campo">
            <label for="ciudad">Ciudad:</label>
            <input type="text" id="ciudad" name="ciudad" required>
        </div>

        <div class="campo">
            <label for="fecha_expedicion">Fecha de Expedición:</label>
            <input type="date" id="fecha_expedicion" name="fecha_expedicion" required>
        </div>

        <div class="campo">
            <label for="permiso_hasta">Permiso válido hasta:</label>
            <input type="date" id="permiso_hasta" name="permiso_hasta" required>
        </div>

        <div class="campo">
            <label for="hora_inicio">Hora de Inicio:</label>
            <input type="time" id="hora_inicio" name="hora_inicio" required>
        </div>

        <div class="campo">
            <label for="hora_fin">Hora de Finalización:</label>
            <input type="time" id="hora_fin" name="hora_fin" required>
        </div>
<hr>
<form id="formulario">
    <div class="pregunta">
      <label>
El trabajo se realiza en techos:
      <input type="radio" name="techos" value="si"> Sí
      <input type="radio" name="techos" value="no"> No
    </label>
    <label>
      El trabajo se realiza en plataformas:
      <input type="radio" name="plataformas" value="si"> Sí
      <input type="radio" name="plataformas" value="no"> No
    </label>
    <label>
      El trabajo se realiza en grúas:
      <input type="radio" name="gruas" value="si"> Sí
      <input type="radio" name="gruas" value="no"> No
    </label>
    <label>
      El trabajo se realiza en andamios:
      <input type="radio" name="andamios" value="si"> Sí
      <input type="radio" name="andamios" value="no"> No
    </label>
    <label>
      El trabajo se realiza en malacates:
      <input type="radio" name="malacates" value="si"> Sí
      <input type="radio" name="malacates" value="no"> No
    </label>
    <label>
      Otros:
      <input type="radio" name="otros" value="si"> Sí
      <input type="radio" name="otros" value="no"> No
    </label>
<label>
    ¿Cuales?:
    <input type="text" placeholder="Solo si la respuesta es SI" id="especifica" name="especifica">

</label>
    <hr>

    
        <button type="button" onclick="guardarDatos()">GENERAR PDF</button>
    </form>
    <script>
        function guardarDatos() {
    // Obtener datos del formulario
    var proyecto = document.getElementById('proyecto').value;
    var ciudad = document.getElementById('ciudad').value;
    var fecha_expedicion = document.getElementById('fecha_expedicion').value;
    var permiso_hasta = document.getElementById('permiso_hasta').value;
    var hora_inicio = document.getElementById('hora_inicio').value;
    var hora_fin = document.getElementById('hora_fin').value;
    var techos = document.querySelector('input[name="techos"]:checked').value;
    var plataformas = document.querySelector('input[name="plataformas"]:checked').value;
    var gruas = document.querySelector('input[name="gruas"]:checked').value;
    var andamios = document.querySelector('input[name="andamios"]:checked').value;
    var malacates = document.querySelector('input[name="malacates"]:checked').value;
    var otros = document.querySelector('input[name="otros"]:checked').value;
    var especifica = document.getElementById('especifica').value;  


    // Crear un nuevo objeto Image
    var img = new Image();
    img.src = 'Permisodealturaspg1.jpg'; // Reemplaza 'ruta_de_tu_imagen.jpg' por la ruta de tu propia imagen de fondo

    // Cuando la imagen se carga, superponer los datos del formulario
    img.onload = function() {
        // Crear un nuevo canvas del mismo tamaño que la imagen
        var canvas = document.createElement('canvas');
        canvas.width = img.width;
        canvas.height = img.height;
        var ctx = canvas.getContext('2d');

        // Dibujar la imagen en el canvas
        ctx.drawImage(img, 0, 0);

        // Establecer el estilo de texto (negrita, Century Gothic y color negro)
        ctx.font = 'bold 16px "Century Gothic"';
        ctx.fillStyle = 'black';

        // Definir las coordenadas para plasmar los datos del formulario
        var coordenadas = {
            proyecto: { x: 299, y: 163 },
            ciudad: { x: 541, y: 163 },
            fecha_expedicion: { x: 902, y: 165 },
            permiso_hasta: { x: 348, y: 180 },
            hora_inicio: { x: 755, y: 180 },
            hora_fin: { x: 958, y: 180 },
            techos: { x: 180, y: 235 },
            plataformas: { x: 286, y: 235 },
            gruas: { x: 416, y: 255 },
            andamios: { x: 416, y: 272 },
            malacates: { x: 416, y: 290 },
            otros: { x: 196, y: 310 },
            especifica: { x: 238, y: 310 },
           
        };
        

        // Superponer los datos del formulario en las coordenadas especificadas
        ctx.fillText(proyecto, coordenadas.proyecto.x, coordenadas.proyecto.y);
        ctx.fillText(ciudad, coordenadas.ciudad.x, coordenadas.ciudad.y);
        ctx.fillText(fecha_expedicion, coordenadas.fecha_expedicion.x, coordenadas.fecha_expedicion.y);
        ctx.fillText(permiso_hasta, coordenadas.permiso_hasta.x, coordenadas.permiso_hasta.y);
        ctx.fillText(hora_inicio, coordenadas.hora_inicio.x, coordenadas.hora_inicio.y);
        ctx.fillText(hora_fin, coordenadas.hora_fin.x, coordenadas.hora_fin.y);
        ctx.fillText(techos, coordenadas.techos.x, coordenadas.techos.y);
        ctx.fillText(plataformas, coordenadas.plataformas.x, coordenadas.plataformas.y);
        ctx.fillText(gruas, coordenadas.gruas.x, coordenadas.gruas.y);
        ctx.fillText(andamios, coordenadas.andamios.x, coordenadas.andamios.y);
        ctx.fillText(malacates, coordenadas.malacates.x, coordenadas.malacates.y);
        ctx.fillText(otros, coordenadas.otros.x, coordenadas.otros.y);
        ctx.fillText(especifica, coordenadas.especifica.x, coordenadas.especifica.y);
        

        

        // Convertir el canvas a imagen JPEG
        var imagenDataUrl = canvas.toDataURL('image/jpeg');

        // Crear un nuevo objeto jsPDF
        var pdf = new jsPDF('p', 'pt', [canvas.width, canvas.height]);

        // Agregar la imagen al PDF
        pdf.addImage(imagenDataUrl, 'JPEG', 0, 0, canvas.width, canvas.height);

        // Descargar el PDF
        pdf.save('Permiso_de_alturas.pdf');
    };
}

    </script>
</body>
</html>
