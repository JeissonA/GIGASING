<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PERMISO PARA TRABAJO EN ALTURA</title>
    <script src="jspdf.min.js"></script>
    <style>
        body {
    font-family: Arial, sans-serif;
}
.color-fondo{
background-color: rgba(255, 0, 0, 0.541);
}
h2 {
    text-align: center;
}
.DGP{
    text-align: center;
   
}
form {
    max-width: 400px;
    margin: 0 auto;
}

.campo {
    margin-bottom: 20px;
}

label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
}

input[type="text"],
input[type="date"],
input[type="time"] {
    width: 100%;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
}

button {
    display: block;
    width: 100%;
    padding: 10px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
}

button:hover {
    background-color: #45a049;
}


body {
    font-family: "Century Gothic", sans-serif;
    background-color: #f0f0f0;
    margin: 0;
    padding: 20px;
  }
  
  h2 {
    color: #333;
  }
  
  form {
    background-color: #fff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  
  .pregunta {
    margin-bottom: 20px;
  }
  
  label {
    display: block;
    margin-bottom: 10px;
  }
  
  input[type="radio"],
  input[type="text"] {
    margin-left: 10px;
  }

  #canvas{
    border: 1px solid black;
  }
  .limpiar{
    width: 100px;
  }
    </style>
</head>
<body>
    <h2>PERMISO PARA TRABAJO EN ALTURA</h2>
    <p class="DGP"><strong>DATOS GENERALES DEL PERMISO</strong></p>
    <form id="formularioPermiso">
        <div class="campo">
            <label for="proyecto">Proyecto o Área:</label>
            <input type="text" id="proyecto" name="proyecto" required>
        </div>

        <div class="campo">
            <label for="ciudad">Ciudad:</label>
            <input type="text" id="ciudad" name="ciudad" required>
        </div>

        <div class="campo">
            <label for="fecha_expedicion">Fecha de Expedición:</label>
            <input type="date" id="fecha_expedicion" name="fecha_expedicion" required>
        </div>

        <div class="campo">
            <label for="permiso_hasta">Permiso válido hasta:</label>
            <input type="date" id="permiso_hasta" name="permiso_hasta" required>
        </div>

        <div class="campo">
            <label for="hora_inicio">Hora de Inicio:</label>
            <input type="time" id="hora_inicio" name="hora_inicio" required>
        </div>

        <div class="campo">
            <label for="hora_fin">Hora de Finalización:</label>
            <input type="time" id="hora_fin" name="hora_fin" required>
        </div>
<hr>
<form id="formulario">
    <div class="pregunta">
      <label>
<p class="color-fondo"><strong>trabajo se realiza en:</strong></p>
techos:
      <input type="radio" name="techos" value="si"> Sí
      <input type="radio" name="techos" value="no"> No
    </label>
    <label>
      plataformas:
      <input type="radio" name="plataformas" value="si"> Sí
      <input type="radio" name="plataformas" value="no"> No
    </label>
    <label>
      grúas:
      <input type="radio" name="gruas" value="si"> Sí
      <input type="radio" name="gruas" value="no"> No
    </label>
    <label>
      andamios:
      <input type="radio" name="andamios" value="si"> Sí
      <input type="radio" name="andamios" value="no"> No
    </label>
    <label>
      malacates:
      <input type="radio" name="malacates" value="si"> Sí
      <input type="radio" name="malacates" value="no"> No
    </label>
    <label>
      Otros:
      <input type="radio" name="otros" value="si"> Sí
      <input type="radio" name="otros" value="no"> No
    </label>
<label>
    ¿Cuales?:
    <input type="text" placeholder="Solo si la respuesta es SI" id="especifica" name="especifica">

</label>
    <hr>
    <form id="formulario-2">
        <div class="pregunta-2">
          <label>
            <p class="color-fondo"><strong>EL SISTEMA DE ACCESO:</strong></p>
    Escaleras fijas:
          <input type="radio" name="escaleras" value="si"> Sí
          <input type="radio" name="escaleras" value="no"> No
        </label>
        <label>
    Moviles:
          <input type="radio" name="moviles" value="si"> Sí
          <input type="radio" name="moviles" value="no"> No
        </label>
        <label>
    Izaje en canasta:
          <input type="radio" name="canasta" value="si"> Sí
          <input type="radio" name="canasta" value="no"> No
        </label>
        <label>
    Andamios:
          <input type="radio" name="andamioss" value="si"> Sí
          <input type="radio" name="andamioss" value="no"> No
        </label>
        <label>
    Estructura:
          <input type="radio" name="estructura" value="si"> Sí
          <input type="radio" name="estructura" value="no"> No
        </label>
        <label>
    Otros:
          <input type="radio" name="otross" value="si"> Sí
          <input type="radio" name="otross" value="no"> No
        </label>
    <label>
        ¿Cuales?:
        <input type="text" placeholder="Solo si la respuesta es SI" id="especificar" name="especificar">
    
    </label>
    <hr>
    <label>
        <p class="color-fondo"><strong>Tipo de Labor:</strong></p>
        Ascenso y Descenso:
        <input type="radio" name="AyD" value="si"> Sí
        <input type="radio" name="AyD" value="si"> No
    </label>

    <label>
        Restriccion:
        <input type="radio" name="Restriccion" value="si">Sí
        <input type="radio" name="Restriccion" value="no"> No
    </label>

    <Label>
        Posicionamiento:
        <input type="radio" name="Posicionamiento" value="si">Sí
        <input type="radio" name="Posicionamiento" value="no">No
    </Label>
    <Label>
        Suspensión:
        <input type="radio" name="Suspension" value="si">Sí
        <input type="radio" name="Suspension" value="no">No
        
    </Label>
<Label>
    Desplazamientos horizontales
    <input type="radio" name="Desplazamientos" value="si">Sí
    <input type="radio" name="Desplazamientos" value="no">No
</Label>

<hr>

<p class="color-fondo"><strong>TRABAJADORES AUTORIZADOS PARA LA EJECUCION DE LA ACTIVIDAD EN ALTURAS</strong></p>
<Label>
Nombre Completo:
<input type="text" name="nombrecompleto" id="nombrecompleto">
</Label>
<Label>
Tipo de documento:
    <input type="text" name="CC" id="CC">
</Label>
<Label>
N° de documento:
<input type="text" name="nocc" id="nocc">
</Label>
<Label>
Cargo:
    <input type="text" name="cargo" id="cargo">
</Label>
<span>FIRMA DIGITAL AQUÍ</span>
  <canvas id="canvas" width="400" height="200"></canvas>
  <button class="limpiar" onclick="limpiarCanvas()">Limpiar</button><br>
</div>
<hr>
<p class="color-fondo"><strong>REQUISITOS PARA LA EJECUCION DE LA ACTIVIDAD</strong></p>
<Label>
    Apto para trabajo en alturas, según examen médico y concepto de aptiptud:
    <input type="radio" name="exmed" value="si">Sí
    <input type="radio" name="exmed" value="no">No
</Label>
<Label>
    Certificado de competencia laboral vigente (trabajo seguro en alturas)
    <input type="radio" name="tral" value="si">Sí
    <input type="radio"name="tral" value="no">No
</Label>
        <button type="button" onclick="guardarDatos()">GENERAR PDF</button>
    </form>
    <footer>
        <p>© Copyrigth Derechos Reservados GIGACON TRANSPORTES S.A.S  (Andres DEV)</p>
    </footer>
    <script>
    
   // Obtener el elemento canvas y su contexto de dibujo
   var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    // Variable para controlar si el usuario está dibujando
    var dibujando = false;

    // Establecer el color de dibujo
    ctx.strokeStyle = 'black'; // Color negro

    // Función para limpiar el contenido del canvas
    function limpiarCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    // Función para obtener las coordenadas del evento
    function obtenerCoordenadas(event) {
      var rect = canvas.getBoundingClientRect();
      var x = event.clientX - rect.left;
      var y = event.clientY - rect.top;
      return { x: x, y: y };
    }

    // Evento al presionar el botón del mouse o tocar la pantalla
    canvas.addEventListener('mousedown', function(event) {
      dibujando = true;
      var coordenadas = obtenerCoordenadas(event);
      ctx.beginPath(); // Comenzar un nuevo trazo
      ctx.moveTo(coordenadas.x, coordenadas.y);
    });

    // Evento al mover el mouse o el dedo mientras se mantiene presionado
    canvas.addEventListener('mousemove', function(event) {
      if (dibujando) {
        var coordenadas = obtenerCoordenadas(event);
        ctx.lineTo(coordenadas.x, coordenadas.y);
        ctx.stroke();
      }
    });

    // Evento al soltar el botón del mouse o levantar el dedo
    canvas.addEventListener('mouseup', function() {
      dibujando = false;
    });

    // Evento al salir del área del canvas
    canvas.addEventListener('mouseleave', function() {
      dibujando = false;
    });

    // Evento al tocar la pantalla
    canvas.addEventListener('touchstart', function(event) {
      event.preventDefault(); // Evitar el comportamiento táctil predeterminado
      dibujando = true;
      var coordenadas = obtenerCoordenadas(event.touches[0]); // Obtener las coordenadas del primer toque
      ctx.beginPath(); // Comenzar un nuevo trazo
      ctx.moveTo(coordenadas.x, coordenadas.y);
    });

    // Evento al mover el dedo mientras se mantiene tocado
    canvas.addEventListener('touchmove', function(event) {
      event.preventDefault(); // Evitar el comportamiento táctil predeterminado
      if (dibujando) {
        var coordenadas = obtenerCoordenadas(event.touches[0]); // Obtener las coordenadas del primer toque
        ctx.lineTo(coordenadas.x, coordenadas.y);
        ctx.stroke();
      }
    });

    // Evento al levantar el dedo de la pantalla
    canvas.addEventListener('touchend', function(event) {
      dibujando = false;
    });

    // Evento al cancelar el evento táctil
    canvas.addEventListener('touchcancel', function(event) {
      dibujando = false;
    });

    // Obtener datos del formulario
    function guardarDatos() {
    var proyecto = document.getElementById('proyecto').value;
    var ciudad = document.getElementById('ciudad').value;
    var fecha_expedicion = document.getElementById('fecha_expedicion').value;
    var permiso_hasta = document.getElementById('permiso_hasta').value;
    var hora_inicio = document.getElementById('hora_inicio').value;
    var hora_fin = document.getElementById('hora_fin').value;
    var techos = document.querySelector('input[name="techos"]:checked').value;
    var plataformas = document.querySelector('input[name="plataformas"]:checked').value;
    var gruas = document.querySelector('input[name="gruas"]:checked').value;
    var andamios = document.querySelector('input[name="andamios"]:checked').value;
    var malacates = document.querySelector('input[name="malacates"]:checked').value;
    var otros = document.querySelector('input[name="otros"]:checked').value;
    var especifica = document.getElementById('especifica').value;
    var escaleras = document.querySelector('input[name="escaleras"]:checked').value;
    var moviles = document.querySelector('input[name="moviles"]:checked').value;
    var canasta = document.querySelector('input[name="canasta"]:checked').value;
    var andamioss = document.querySelector('input[name="andamioss"]:checked').value;
    var estructura = document.querySelector('input[name="estructura"]:checked').value;
    var otross = document.querySelector('input[name="otross"]:checked').value;  
    var especificar = document.getElementById('especificar').value;
    var AyD = document.querySelector('input[name="AyD"]:checked').value;
    var Restriccion = document.querySelector('input[name="Restriccion"]:checked').value;
    var Posicionamiento = document.querySelector('input[name="Posicionamiento"]:checked').value;
    var Suspension = document.querySelector('input[name="Suspension"]:checked').value;
    var Desplazamientos = document.querySelector('input[name="Desplazamientos"]:checked').value;
    var nombrecompleto = document.getElementById('nombrecompleto').value;
    var CC = document.getElementById('CC').value;
    var nocc = document.getElementById('nocc').value;
    var cargo = document.getElementById('cargo').value;
    var firma = document.querySelectorAll('input[name="firma"]:checked').value;
    
    // Crear un nuevo objeto Image
    var img = new Image();
    img.src = '/img/Permisodealturaspg1.jpg'; // Reemplaza 'ruta_de_tu_imagen.jpg' por la ruta de tu propia imagen de fondo

    // Cuando la imagen se carga, superponer los datos del formulario
    img.onload = function() {
        // Crear un nuevo canvas del mismo tamaño que la imagen
        var canvas = document.createElement('canvas');
        canvas.width = img.width;
        canvas.height = img.height;
        var ctx = canvas.getContext('2d');

        // Dibujar la imagen en el canvas
        ctx.drawImage(img, 0, 0);

        // Establecer el estilo de texto (negrita, Century Gothic y color negro)
        ctx.font = 'bold 16px "Century Gothic"';
        ctx.fillStyle = 'black';

        // Definir las coordenadas para plasmar los datos del formulario
        var coordenadas = {
            proyecto: { x: 299, y: 163 },
            ciudad: { x: 541, y: 163 },
            fecha_expedicion: { x: 902, y: 165 },
            permiso_hasta: { x: 348, y: 180 },
            hora_inicio: { x: 755, y: 180 },
            hora_fin: { x: 958, y: 180 },
            techos: { x: 180, y: 235 },
            plataformas: { x: 286, y: 235 },
            gruas: { x: 416, y: 255 },
            andamios: { x: 416, y: 272 },
            malacates: { x: 416, y: 290 },
            otros: { x: 196, y: 310 },
            especifica: { x: 547, y: 230 },
            escaleras: { x: 551, y: 234 },
            moviles: { x: 650, y: 234 },
            canasta: { x: 788, y: 252 },
            andamioss: { x: 788, y: 271 },
            estructura: { x: 788, y: 289 },
            otross: { x: 495, y: 310 },
            especificar: { x: 530, y: 310 },
            AyD: { x: 1092, y: 237 },
            Restriccion: { x: 1092, y: 253 },
            Posicionamiento: { x: 1092, y: 270 },
            Suspension: { x: 1092, y: 287 },
            Desplazamientos: { x: 1092, y: 307 },
            nombrecompleto: { x: 196, y: 455 },
            CC: { x: 548, y: 455 },
            nocc: { x: 682, y: 455 },
            cargo: { x: 792, y: 455 },
            firma: { x: 955, y: 455 },
           
        };
        

        // Superponer los datos del formulario en las coordenadas especificadas
        ctx.fillText(proyecto, coordenadas.proyecto.x, coordenadas.proyecto.y);
        ctx.fillText(ciudad, coordenadas.ciudad.x, coordenadas.ciudad.y);
        ctx.fillText(fecha_expedicion, coordenadas.fecha_expedicion.x, coordenadas.fecha_expedicion.y);
        ctx.fillText(permiso_hasta, coordenadas.permiso_hasta.x, coordenadas.permiso_hasta.y);
        ctx.fillText(hora_inicio, coordenadas.hora_inicio.x, coordenadas.hora_inicio.y);
        ctx.fillText(hora_fin, coordenadas.hora_fin.x, coordenadas.hora_fin.y);
        ctx.fillText(techos, coordenadas.techos.x, coordenadas.techos.y);
        ctx.fillText(plataformas, coordenadas.plataformas.x, coordenadas.plataformas.y);
        ctx.fillText(gruas, coordenadas.gruas.x, coordenadas.gruas.y);
        ctx.fillText(andamios, coordenadas.andamios.x, coordenadas.andamios.y);
        ctx.fillText(malacates, coordenadas.malacates.x, coordenadas.malacates.y);
        ctx.fillText(otros, coordenadas.otros.x, coordenadas.otros.y);
        ctx.fillText(especifica, coordenadas.especifica.x, coordenadas.especifica.y);
        ctx.fillText(escaleras, coordenadas.escaleras.x, coordenadas.escaleras.y);
        ctx.fillText(moviles, coordenadas.moviles.x, coordenadas.moviles.y);
        ctx.fillText(canasta, coordenadas.canasta.x, coordenadas.canasta.y);
        ctx.fillText(andamioss, coordenadas.andamioss.x, coordenadas.andamios.y);
        ctx.fillText(estructura, coordenadas.estructura.x, coordenadas.estructura.y);
        ctx.fillText(otross, coordenadas.otross.x, coordenadas.otross.y);
        ctx.fillText(especificar, coordenadas.especificar.x, coordenadas.especificar.y);
        ctx.fillText(AyD, coordenadas.AyD.x, coordenadas.AyD.y);
        ctx.fillText(Restriccion, coordenadas.Restriccion.x, coordenadas.Restriccion.y);
        ctx.fillText(Posicionamiento, coordenadas.Posicionamiento.x, coordenadas.Posicionamiento.y);
        ctx.fillText(Suspension, coordenadas.Suspension.x, coordenadas.Suspension.y);
        ctx.fillText(Desplazamientos, coordenadas.Desplazamientos.x, coordenadas.Desplazamientos.y);
        ctx.fillText(nombrecompleto, coordenadas.nombrecompleto.x, coordenadas.nombrecompleto.y);
        ctx.fillText(CC, coordenadas.CC.x, coordenadas.CC.y);
        ctx.fillText(nocc, coordenadas.nocc.x, coordenadas.nocc.y);
        ctx.fillText(cargo, coordenadas.cargo.x, coordenadas.cargo.y);
        ctx.fillText(firma, coordenadas.firma.x, coordenadas.firma.y);

        

        // Convertir el canvas a imagen JPEG
        var imagenDataUrl = canvas.toDataURL('image/jpeg');

        // Crear un nuevo objeto jsPDF
        var pdf = new jsPDF('p', 'pt', [canvas.width, canvas.height]);

        // Agregar la imagen al PDF
        pdf.addImage(imagenDataUrl, 'JPEG', 0, 0, canvas.width, canvas.height);

        // Descargar el PDF
        pdf.save('Permiso_de_alturas.pdf');
    };
}





    </script>
</body>
</html>
